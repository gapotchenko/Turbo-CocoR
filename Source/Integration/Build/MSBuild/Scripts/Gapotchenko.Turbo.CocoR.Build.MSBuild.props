<Project>

  <PropertyGroup>
    <TcrLangExtension Condition=" '$(MSBuildProjectExtension)' == '.csproj' " >.cs</TcrLangExtension>
  </PropertyGroup>

  <ItemGroup Condition=" '$(TcrLangExtension)' != '' ">
    <!-- Gather project grammar files. -->
    <TcrAtgFile Include="**\*.atg" Exclude="$(DefaultItemExcludes)">
      <Scanner>%(RelativeDir)Scanner$(TcrLangExtension)</Scanner>
      <Parser>%(RelativeDir)Parser$(TcrLangExtension)</Parser>
    </TcrAtgFile>

    <!-- Changes in grammar files should trigger the build. -->
    <UpToDateCheckInput Include="@(TcrAtgFile)" Kind="ImplicitBuild" />

    <!-- Changes in grammar files lead to changes in generated code which should be recompiled. -->
    <CustomAdditionalCompileInputs Include="@(TcrAtgFile)" />
  </ItemGroup>

</Project>
